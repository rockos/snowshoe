var url = require("url");
var iqy = require("./iqy/iqy");
var str  = require("./str/str");



/* for screen */

/* function Definition */
var handle = {};
handle['/scr/101'] = iqy.main;
handle['/scr/201'] = str.main;


exports.scrget = function(req, res){
    var pathname = url.parse(req.url).pathname;
    console.log('get action ' + req.params.id);
    if (typeof handle[pathname] === 'function') {
	handle[pathname](req, res);
    } else {
	res.redirect('/');
    }

};


exports.scrpost = function(req, res) {
    var pathname = url.parse(req.url).pathname;

    /* dispatch */
    if (typeof handle[pathname] === 'function') {
	handle[pathname](req, res);
    } else {
	res.redirect('/');
    }

};

var id = 'foo@locos.jp';
var passwd = 'hoge';
var flag = false;

exports.check = function(req, res) {
    console.log('req.body.userid: ',req.body.userid);
    console.log('req.body.password: ',req.body.password);
	if(id === req.body.userid && passwd === req.body.password) {
	    flag = true;
	    req.flag = flag;
	    res.redirect('/menu');
	} else {
	    res.redirect('/');
	}


};
